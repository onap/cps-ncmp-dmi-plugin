{
  "comments": [
    {
      "unresolved": true,
      "key": {
        "uuid": "69cb5fc9_0d706d98",
        "filename": "/COMMIT_MSG",
        "patchSetId": 5
      },
      "lineNbr": 13,
      "author": {
        "id": 7965
      },
      "writtenOn": "2024-10-23T09:16:52Z",
      "side": 1,
      "message": "it was 100KB before.. right ?\nu got feedback from the stakeholders??",
      "range": {
        "startLine": 13,
        "startChar": 28,
        "endLine": 13,
        "endChar": 33
      },
      "revId": "7ddd33fd4dd5b0061dff64f3e6c97ec2515a4231",
      "serverId": "14b4e41f-c4e3-4fb9-9955-6a9b5656895a"
    },
    {
      "unresolved": true,
      "key": {
        "uuid": "0afb6517_f13f32fb",
        "filename": "dmi-stub/dmi-plugin-demo-and-csit-stub-app/src/main/java/org/onap/cps/ncmp/dmi/rest/stub/controller/DmiDemoApplication.java",
        "patchSetId": 5
      },
      "lineNbr": 29,
      "author": {
        "id": 7957
      },
      "writtenOn": "2024-10-23T10:00:14Z",
      "side": 1,
      "message": "The @SpringBootApplication annotation itself includes @ComponentScan, which, by default, scans the package where the application class resides (i.e., the org.onap.cps.ncmp.dmi.rest.stub package in this case) and its subpackages.\n\nSo unless you want to scan additional packages that aren\u0027t in the same package or subpackages as DmiDemoApplication, the explicit @ComponentScan is redundant.",
      "range": {
        "startLine": 29,
        "startChar": 0,
        "endLine": 29,
        "endChar": 66
      },
      "revId": "7ddd33fd4dd5b0061dff64f3e6c97ec2515a4231",
      "serverId": "14b4e41f-c4e3-4fb9-9955-6a9b5656895a"
    },
    {
      "unresolved": true,
      "key": {
        "uuid": "fde4263c_0f8e6387",
        "filename": "dmi-stub/dmi-plugin-demo-and-csit-stub-service/src/main/java/org/onap/cps/ncmp/dmi/rest/stub/controller/DmiRestStubController.java",
        "patchSetId": 5
      },
      "lineNbr": 81,
      "author": {
        "id": 7965
      },
      "writtenOn": "2024-10-23T09:16:52Z",
      "side": 1,
      "message": "rename this . causes sonar violation.\nDATA_OPERATION_EVENT_TYPE.\n\nor consider hardcoding at relevant place.",
      "range": {
        "startLine": 81,
        "startChar": 32,
        "endLine": 81,
        "endChar": 54
      },
      "revId": "7ddd33fd4dd5b0061dff64f3e6c97ec2515a4231",
      "serverId": "14b4e41f-c4e3-4fb9-9955-6a9b5656895a"
    },
    {
      "unresolved": true,
      "key": {
        "uuid": "58a42aa2_548c5308",
        "filename": "dmi-stub/dmi-plugin-demo-and-csit-stub-service/src/main/java/org/onap/cps/ncmp/dmi/rest/stub/controller/DmiRestStubController.java",
        "patchSetId": 5
      },
      "lineNbr": 83,
      "author": {
        "id": 6639
      },
      "writtenOn": "2024-10-23T09:03:42Z",
      "side": 1,
      "message": "thsi is no longer a \u0027number\u0027",
      "range": {
        "startLine": 83,
        "startChar": 38,
        "endLine": 83,
        "endChar": 64
      },
      "revId": "7ddd33fd4dd5b0061dff64f3e6c97ec2515a4231",
      "serverId": "14b4e41f-c4e3-4fb9-9955-6a9b5656895a"
    },
    {
      "unresolved": true,
      "key": {
        "uuid": "34fe2c3b_fe33d6a4",
        "filename": "dmi-stub/dmi-plugin-demo-and-csit-stub-service/src/main/java/org/onap/cps/ncmp/dmi/rest/stub/controller/DmiRestStubController.java",
        "patchSetId": 5
      },
      "lineNbr": 368,
      "author": {
        "id": 7957
      },
      "writtenOn": "2024-10-23T10:00:14Z",
      "side": 1,
      "message": "Use it as 1st line of this method",
      "range": {
        "startLine": 368,
        "startChar": 8,
        "endLine": 368,
        "endChar": 38
      },
      "revId": "7ddd33fd4dd5b0061dff64f3e6c97ec2515a4231",
      "serverId": "14b4e41f-c4e3-4fb9-9955-6a9b5656895a"
    },
    {
      "unresolved": true,
      "key": {
        "uuid": "0cab8dd5_d3030eea",
        "filename": "dmi-stub/dmi-plugin-demo-and-csit-stub-service/src/main/java/org/onap/cps/ncmp/dmi/rest/stub/service/YangModuleFactory.java",
        "patchSetId": 5
      },
      "lineNbr": 42,
      "author": {
        "id": 7957
      },
      "writtenOn": "2024-10-23T10:00:14Z",
      "side": 1,
      "message": "Key Improvements:\n\nHelper Method for JSON Generation: The generateModuleJson method handles both ModuleReferences and ModuleResources generation, reducing repetition and complexity.\n\nError Logging Consistency: The SERIALIZATION_ERROR constant centralizes the error logging message to avoid hardcoded strings.\n\nSimplified Logic: makeModuleRevision no longer needs to depend on the tag parameter since it\u0027s consistent throughout. If needed, you could add tag as an argument to bring it back.\n\nOptimized Padding Generation: Using \" \".repeat(...) improves the clarity of padding generation, making the code easier to follow.\n\nReduced Repetition: The logic for generating module references and resources is cleanly separated, and JSON serialization is handled in a more streamlined manner.\n\n\n@Slf4j\n@Service\n@RequiredArgsConstructor\npublic class YangModuleFactory {\n\n    private static final int TARGET_SIZE \u003d 32;\n    private static final int KILOBYTE \u003d 1024;\n    private static final List\u003cString\u003e NUMBER_OF_MODULE_SET_TAGS \u003d ModuleSetTagUtil.generateTags(\u0027A\u0027, \u0027E\u0027);\n    private static final String DEFAULT_TAG \u003d \"tagDefault\";\n    private static final int NUMBER_OF_MODULES_PER_MODULE_SET \u003d 200;\n    private static final int NUMBER_OF_MODULES_NOT_IN_MODULE_SET \u003d 10;\n    private static final String MODULE_TEMPLATE \u003d \"\"\"\n        module \u003cMODULE_NAME\u003e {\n            yang-version 1.1;\n            namespace \"org:onap:cps:test:\u003cMODULE_NAME\u003e\";\n            prefix tree;\n            revision \"\u003cMODULE_REVISION\u003e\" {\n                description \"\u003cDESCRIPTION\u003e\";\n            }\n            container tree {\n                list branch {\n                    key \"name\";\n                    leaf name {\n                        type string;\n                    }\n                }\n            }\n        }\n        \"\"\";\n    private static final String SERIALIZATION_ERROR \u003d \"Error serializing {}: {}\";\n\n    private final ObjectMapper objectMapper;\n    private final Map\u003cString, String\u003e moduleReferencesJsonMap \u003d new HashMap\u003c\u003e();\n    private final Map\u003cString, String\u003e moduleResourcesJsonMap \u003d new HashMap\u003c\u003e();\n\n    @PostConstruct\n    private void initializeModuleJsonStrings() {\n        NUMBER_OF_MODULE_SET_TAGS.forEach(tag -\u003e {\n            moduleReferencesJsonMap.put(tag, generateModuleJson(tag, NUMBER_OF_MODULES_PER_MODULE_SET, this::makeModuleReferences));\n            moduleResourcesJsonMap.put(tag, generateModuleJson(tag, NUMBER_OF_MODULES_PER_MODULE_SET, this::makeModuleResources));\n        });\n        \n        // Initialize default tag\n        moduleReferencesJsonMap.put(DEFAULT_TAG,\n            generateModuleJson(DEFAULT_TAG, NUMBER_OF_MODULES_NOT_IN_MODULE_SET, this::makeModuleReferences));\n        moduleResourcesJsonMap.put(DEFAULT_TAG,\n            generateModuleJson(DEFAULT_TAG, NUMBER_OF_MODULES_NOT_IN_MODULE_SET, this::makeModuleResources));\n    }\n\n    public String getModuleReferencesJson(final String tag) {\n        return moduleReferencesJsonMap.getOrDefault(tag, moduleReferencesJsonMap.get(DEFAULT_TAG));\n    }\n\n    public String getModuleResourcesJson(final String tag) {\n        return moduleResourcesJsonMap.getOrDefault(tag, moduleResourcesJsonMap.get(DEFAULT_TAG));\n    }\n\n    private String generateModuleJson(final String tag, final int length, final Function\u003cInteger, String\u003e generator) {\n        try {\n            return generator.apply(length);\n        } catch (final JsonProcessingException jsonProcessingException) {\n            log.error(SERIALIZATION_ERROR, tag, jsonProcessingException.getMessage());\n            return null;\n        }\n    }\n\n    private String makeModuleReferences(final int length) throws JsonProcessingException {\n        final List\u003cModuleReference\u003e moduleReferencesList \u003d new ArrayList\u003c\u003e();\n        for (int i \u003d 0; i \u003c length; i++) {\n            moduleReferencesList.add(new ModuleReference(\"module\" + i, makeModuleRevision(i)));\n        }\n        return objectMapper.writeValueAsString(new ModuleReferences(moduleReferencesList));\n    }\n\n    private String makeModuleResources(final int length) throws JsonProcessingException {\n        final List\u003cModuleResource\u003e moduleResourceList \u003d new ArrayList\u003c\u003e();\n        for (int i \u003d 0; i \u003c length; i++) {\n            final String moduleName \u003d \"module\" + i;\n            final String revision \u003d makeModuleRevision(i);\n            final String yangSource \u003d makeYangSource(moduleName, revision);\n            moduleResourceList.add(new ModuleResource(moduleName, revision, yangSource));\n        }\n        return objectMapper.writeValueAsString(moduleResourceList);\n    }\n\n    private String makeModuleRevision(final int index) {\n        return LocalDate.of(2021, 1, 1).plusDays(index).toString() + \"-\" + DEFAULT_TAG;\n    }\n\n    private String makeYangSource(final String moduleName, final String moduleRevision) {\n        final int paddingSize \u003d TARGET_SIZE * KILOBYTE - MODULE_TEMPLATE.length();\n        final String padding \u003d \" \".repeat(Math.max(0, paddingSize));\n        return MODULE_TEMPLATE.replace(\"\u003cMODULE_NAME\u003e\", moduleName)\n            .replace(\"\u003cMODULE_REVISION\u003e\", moduleRevision)\n            .replace(\"\u003cDESCRIPTION\u003e\", padding);\n    }\n}",
      "revId": "7ddd33fd4dd5b0061dff64f3e6c97ec2515a4231",
      "serverId": "14b4e41f-c4e3-4fb9-9955-6a9b5656895a"
    },
    {
      "unresolved": true,
      "key": {
        "uuid": "3d8f4614_cf8bc7e0",
        "filename": "dmi-stub/dmi-plugin-demo-and-csit-stub-service/src/main/java/org/onap/cps/ncmp/dmi/rest/stub/service/YangModuleFactory.java",
        "patchSetId": 5
      },
      "lineNbr": 45,
      "author": {
        "id": 6639
      },
      "writtenOn": "2024-10-23T09:03:42Z",
      "side": 1,
      "message": "just combine this into one constant:\nTARGET_FILE_SIZE_IN_KB \u003d 32 * 1024",
      "range": {
        "startLine": 44,
        "startChar": 4,
        "endLine": 45,
        "endChar": 45
      },
      "revId": "7ddd33fd4dd5b0061dff64f3e6c97ec2515a4231",
      "serverId": "14b4e41f-c4e3-4fb9-9955-6a9b5656895a"
    },
    {
      "unresolved": true,
      "key": {
        "uuid": "0f4d0d18_55768388",
        "filename": "dmi-stub/dmi-plugin-demo-and-csit-stub-service/src/main/java/org/onap/cps/ncmp/dmi/rest/stub/service/YangModuleFactory.java",
        "patchSetId": 5
      },
      "lineNbr": 49,
      "author": {
        "id": 6742
      },
      "writtenOn": "2024-10-23T09:05:49Z",
      "side": 1,
      "message": "Nb. It would be less surprising if this was also 200",
      "range": {
        "startLine": 49,
        "startChar": 67,
        "endLine": 49,
        "endChar": 69
      },
      "revId": "7ddd33fd4dd5b0061dff64f3e6c97ec2515a4231",
      "serverId": "14b4e41f-c4e3-4fb9-9955-6a9b5656895a"
    },
    {
      "unresolved": true,
      "key": {
        "uuid": "74e41546_b0ef6ba5",
        "filename": "dmi-stub/dmi-plugin-demo-and-csit-stub-service/src/main/java/org/onap/cps/ncmp/dmi/rest/stub/service/YangModuleFactory.java",
        "patchSetId": 5
      },
      "lineNbr": 94,
      "author": {
        "id": 7957
      },
      "writtenOn": "2024-10-23T10:00:14Z",
      "side": 1,
      "message": "Make it as 1st method",
      "range": {
        "startLine": 94,
        "startChar": 17,
        "endLine": 94,
        "endChar": 44
      },
      "revId": "7ddd33fd4dd5b0061dff64f3e6c97ec2515a4231",
      "serverId": "14b4e41f-c4e3-4fb9-9955-6a9b5656895a"
    },
    {
      "unresolved": true,
      "key": {
        "uuid": "9e77804d_768036bd",
        "filename": "dmi-stub/dmi-plugin-demo-and-csit-stub-service/src/main/java/org/onap/cps/ncmp/dmi/rest/stub/service/YangModuleFactory.java",
        "patchSetId": 5
      },
      "lineNbr": 105,
      "author": {
        "id": 7957
      },
      "writtenOn": "2024-10-23T10:00:14Z",
      "side": 1,
      "message": "rename : generateModuleJson",
      "range": {
        "startLine": 105,
        "startChar": 19,
        "endLine": 105,
        "endChar": 39
      },
      "revId": "7ddd33fd4dd5b0061dff64f3e6c97ec2515a4231",
      "serverId": "14b4e41f-c4e3-4fb9-9955-6a9b5656895a"
    },
    {
      "unresolved": true,
      "key": {
        "uuid": "0b50515a_3e7b048f",
        "filename": "dmi-stub/dmi-plugin-demo-and-csit-stub-service/src/main/java/org/onap/cps/ncmp/dmi/rest/stub/utils/ModuleSetTagUtil.java",
        "patchSetId": 5
      },
      "lineNbr": 26,
      "author": {
        "id": 6639
      },
      "writtenOn": "2024-10-23T09:03:42Z",
      "side": 1,
      "message": "you need a static method in teh same class, not a Separete UTIL class",
      "range": {
        "startLine": 26,
        "startChar": 13,
        "endLine": 26,
        "endChar": 30
      },
      "revId": "7ddd33fd4dd5b0061dff64f3e6c97ec2515a4231",
      "serverId": "14b4e41f-c4e3-4fb9-9955-6a9b5656895a"
    },
    {
      "unresolved": true,
      "key": {
        "uuid": "565dcd38_38a32a94",
        "filename": "dmi-stub/dmi-plugin-demo-and-csit-stub-service/src/main/java/org/onap/cps/ncmp/dmi/rest/stub/utils/ModuleSetTagUtil.java",
        "patchSetId": 5
      },
      "lineNbr": 41,
      "author": {
        "id": 7957
      },
      "writtenOn": "2024-10-23T10:00:14Z",
      "side": 1,
      "message": "These changes make the code more readable and self-explanatory, which is especially useful for anyone reading or maintaining the code in the future.:\n\n\n/**\n     * Generates a list of tags with characters ranging from the specified startCharacter to endCharacter.\n     *\n     * @param startCharacter the starting character for the tags\n     * @param endCharacter the ending character for the tags\n     * @return a list of tags in the format \"tagX\" where X is each character from startCharacter to endCharacter\n     */\n     \n     \n    private static List\u003cString\u003e generateTags(final char startCharacter, final char endCharacter) {\n        final List\u003cString\u003e generatedTags \u003d new ArrayList\u003c\u003e();\n        for (char currentCharacter \u003d startCharacter; currentCharacter \u003c\u003d endCharacter; currentCharacter++) {\n            generatedTags.add(\"tag\" + currentCharacter);\n        }\n        return generatedTags;\n    }",
      "range": {
        "startLine": 28,
        "startChar": 4,
        "endLine": 41,
        "endChar": 5
      },
      "revId": "7ddd33fd4dd5b0061dff64f3e6c97ec2515a4231",
      "serverId": "14b4e41f-c4e3-4fb9-9955-6a9b5656895a"
    }
  ]
}